{% extends "base.html" %}
{% block title %}ãƒ¬ã‚·ãƒ”ä¸€è¦§{% endblock %}

{% block content %}

<div class="d-flex justify-content-between mb-3">
    <h4>ãƒ¬ã‚·ãƒ”ä¸€è¦§</h4>
    <a href="{{ url_for('add_recipe') }}" class="btn btn-primary btn-sm">
        ï¼‹ æ–°è¦ãƒ¬ã‚·ãƒ”
    </a>
    <hr>
    <a href="{{ url_for('categories') }}" class="btn btn-primary btn-sm">
        ğŸ“‚ åˆ†é¡ç®¡ç†
    </a>
    <hr>
    {% if show_fav %}
        <a href="{{ url_for('index') }}" class="btn btn-primary btn-sm">
            â† å…¨ä»¶è¡¨ç¤º
        </a>
        <hr>
    {% else %}
        <a href="{{ url_for('index', fav=1) }}" class="btn btn-primary btn-sm">
            â­ ãŠæ°—ã«å…¥ã‚Šã®ã¿
        </a>
        <hr>
    {% endif %}
</div>

<form method="get" action="{{ url_for('index') }}">
    ææ–™ï¼š
    <input type="text" name="ingredient" value="{{ request.args.get('ingredient','') }}">

    åˆ†é¡ï¼š
    <select name="category_id">
        <option value="">ã™ã¹ã¦</option>
        {% for c in categories %}
            <option value="{{ c.id }}"
              {% if request.args.get('category_id') == c.id|string %}selected{% endif %}>
              {{ c.name }}
            </option>
        {% endfor %}
    </select>

    <button type="submit">æ¤œç´¢</button>
</form>

<hr>

<div class="row">
{% for recipe in recipes %}
  <div class="col-6 col-md-4 col-lg-3 mb-3">
    <div class="card h-100">
      {% if recipe.image %}
        <img src="{{ url_for('static', filename='images/' + recipe.image) }}"
             class="card-img-top img-fluid">
      {% endif %}

      <div class="card-body">
        <h6 class="card-title">{{ recipe.name }}</h6>
        <small>{{ recipe['category'] or 'æœªåˆ†é¡' }}</small>
        <a href="{{ url_for('toggle_favorite', recipe_id=recipe['id']) }}">
            {% if recipe['favorite'] %}
                â­ ãŠæ°—ã«å…¥ã‚Š
            {% else %}
                â˜† ãŠæ°—ã«å…¥ã‚Š
            {% endif %}
        </a>
        <a href="{{ url_for('recipe_detail', recipe_id=recipe.id) }}"
           class="btn btn-outline-primary btn-sm w-100">
           è©³ç´°
        </a>
      </div>
    </div>
  </div>
{% endfor %}
</div>

{% endblock %}
