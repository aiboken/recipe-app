<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ãƒ¬ã‚·ãƒ”ä¸€è¦§</title>
    <style>
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 16px;
        }
        .card {
            border: 1px solid #ccc;
            padding: 8px;
            text-align: center;
        }
        img {
            max-width: 100%;
            height: 120px;
            object-fit: cover;
        }
    </style>
</head>
<body>

<h1>ãƒ¬ã‚·ãƒ”ä¸€è¦§</h1>

<a href="{{ url_for('add_recipe') }}">â• æ–°è¦ãƒ¬ã‚·ãƒ”è¿½åŠ </a>
ï½œ
<a href="{{ url_for('categories') }}">ğŸ“‚ åˆ†é¡ç®¡ç†</a>
ï½œ
{% if show_fav %}
    <a href="{{ url_for('index') }}">â† å…¨ä»¶è¡¨ç¤º</a>
ï½œ
{% else %}
    <a href="{{ url_for('index', fav=1) }}">â­ ãŠæ°—ã«å…¥ã‚Šã®ã¿</a>
{% endif %}

<hr>

<form method="get" action="{{ url_for('index') }}">
    ææ–™ï¼š
    <input type="text" name="ingredient" value="{{ request.args.get('ingredient','') }}">

    åˆ†é¡ï¼š
    <select name="category_id">
        <option value="">ã™ã¹ã¦</option>
        {% for c in categories %}
            <option value="{{ c.id }}"
              {% if request.args.get('category_id') == c.id|string %}selected{% endif %}>
              {{ c.name }}
            </option>
        {% endfor %}
    </select>

    <button type="submit">æ¤œç´¢</button>
</form>

<hr>

<div class="grid">


{% for recipe in recipes %}
    <div class="card">
        <a href="{{ url_for('recipe_detail', recipe_id=recipe['id']) }}">
            {% if recipe['image'] %}
                <img src="{{ url_for('static', filename='images/' + recipe['image']) }}">
            {% else %}
                <div style="height:120px;line-height:120px;background:#eee;">
                    ç”»åƒãªã—
                </div>
            {% endif %}
<div>
    <strong>{{ recipe['name'] }}</strong><br>
    <small>{{ recipe['category'] or 'æœªåˆ†é¡' }}</small><br>

    <a href="{{ url_for('toggle_favorite', recipe_id=recipe['id']) }}">
        {% if recipe['favorite'] %}
            â­ ãŠæ°—ã«å…¥ã‚Š
        {% else %}
            â˜† ãŠæ°—ã«å…¥ã‚Š
        {% endif %}
    </a>
</div>

        </a>
    </div>
{% endfor %}
</div>

</body>
</html>
