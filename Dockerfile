FROM python:3.13-slim

# tesseract をインストール
RUN apt-get update && \
    apt-get install -y tesseract-ocr && \
    rm -rf /var/lib/apt/lists/*

WORKDIR /app

# Pythonライブラリを先に入れる
COPY requirements.txt .
RUN pip install --no-cache-dir -r requirements.txt

# アプリ本体をコピー
COPY . .

# Render 用起動コマンド
CMD ["gunicorn", "app:app"]
